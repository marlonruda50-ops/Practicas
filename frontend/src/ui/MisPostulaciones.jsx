import React from 'react'; import { apiBase } from './App.jsx'; export default function MisPostulaciones(){ const [rows,setRows]=React.useState([]); const [msg,setMsg]=React.useState(''); const token=localStorage.getItem('token'); const user=JSON.parse(localStorage.getItem('user')||'null'); const fetchData=async()=>{ if(!token||user?.rol!=='Estudiante'){ setMsg('Inicia sesiÃ³n como Estudiante'); return } const res=await fetch(`${apiBase}/postulaciones/mias`,{headers:{'Authorization':'Bearer '+token}}); const data=await res.json(); if(res.ok) setRows(data); else setMsg('Error al listar postulaciones'); }; React.useEffect(()=>{ fetchData() },[]); return (<div className='card'><h3>Mis postulaciones</h3>{msg&&<p className='badge' style={{color:'#ffb'}}>{msg}</p>}<table className='table'><thead><tr><th>ID</th><th>Oferta</th><th>Estado</th><th>Fecha</th></tr></thead><tbody>{rows.map(r=>(<tr key={r.id}><td>{r.id}</td><td>{r.id_oferta}</td><td>{r.estado}</td><td>{new Date(r.fecha).toLocaleString()}</td></tr>))}</tbody></table></div>); }
