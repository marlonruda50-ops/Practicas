import React from 'react'; import { useNavigate, Link } from 'react-router-dom'; import { apiBase } from './App.jsx'; export default function Login({ onAuth }){ const [correo,setCorreo]=React.useState('empresa@demo.com'); const [password,setPassword]=React.useState('demo1234'); const [msg,setMsg]=React.useState(''); const nav=useNavigate(); const submit=async e=>{ e.preventDefault(); setMsg(''); const res=await fetch(`${apiBase}/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({correo,password})}); const data=await res.json(); if(res.ok&&data.token){ localStorage.setItem('token',data.token); localStorage.setItem('user',JSON.stringify(data.user)); onAuth?.(data.token,data.user); nav('/ofertas'); } else { setMsg(data.message||'Error de autenticación'); } }; return (<div className='card'><h3>Iniciar sesión</h3><form onSubmit={submit}><label>Correo <input value={correo} onChange={e=>setCorreo(e.target.value)} /></label><label>Contraseña <input type='password' value={password} onChange={e=>setPassword(e.target.value)} /></label><div className='flex'><button>Entrar</button><Link to='/register' className='right'>¿No tienes cuenta? Regístrate</Link></div>{msg&&<p className='badge' style={{color:'#ffb'}}>{msg}</p>}</form></div>); }
