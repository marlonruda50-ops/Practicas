import React from 'react'; import { useNavigate } from 'react-router-dom'; import { apiBase } from './App.jsx'; export default function Register(){ const [nombre,setNombre]=React.useState(''); const [apellido,setApellido]=React.useState(''); const [correo,setCorreo]=React.useState(''); const [password,setPassword]=React.useState(''); const [rol,setRol]=React.useState('Estudiante'); const [msg,setMsg]=React.useState(''); const nav=useNavigate(); const submit=async e=>{ e.preventDefault(); setMsg(''); const res=await fetch(`${apiBase}/auth/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({nombre,apellido,correo,password,rol})}); const data=await res.json(); if(res.ok){ setMsg('Registro exitoso. Ahora inicia sesión.'); setTimeout(()=>nav('/login'),800); } else { setMsg(data.message||'Error de registro'); } }; return (<div className='card'><h3>Registro</h3><form onSubmit={submit}><label>Rol <select value={rol} onChange={e=>setRol(e.target.value)}><option>Estudiante</option><option>Empresa</option></select></label><label>Nombre <input value={nombre} onChange={e=>setNombre(e.target.value)}/></label><label>Apellido <input value={apellido} onChange={e=>setApellido(e.target.value)}/></label><label>Correo <input value={correo} onChange={e=>setCorreo(e.target.value)}/></label><label>Contraseña <input type='password' value={password} onChange={e=>setPassword(e.target.value)}/></label><button>Crear cuenta</button>{msg&&<p className='badge' style={{color:'#ffb'}}>{msg}</p>}</form></div>); }
