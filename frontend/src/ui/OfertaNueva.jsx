import React from 'react'; import { apiBase } from './App.jsx'; import { useNavigate } from 'react-router-dom'; export default function OfertaNueva(){ const [titulo,setTitulo]=React.useState(''); const [descripcion,setDescripcion]=React.useState(''); const [tipo,setTipo]=React.useState('Profesional'); const [msg,setMsg]=React.useState(''); const nav=useNavigate(); const token=localStorage.getItem('token'); const crear=async e=>{ e.preventDefault(); if(!token){ setMsg('Inicia sesión como Empresa'); return; } const res=await fetch(`${apiBase}/ofertas`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},body:JSON.stringify({titulo,descripcion,tipo_practica:tipo})}); const data=await res.json(); if(res.ok){ nav('/ofertas'); } else { setMsg(data.message||'Error al crear'); } }; return (<div className='card'><h3>Publicar oferta (Empresa)</h3><form onSubmit={crear}><label>Título <input value={titulo} onChange={e=>setTitulo(e.target.value)}/></label><label>Descripción <textarea value={descripcion} onChange={e=>setDescripcion(e.target.value)}/></label><label>Tipo <select value={tipo} onChange={e=>setTipo(e.target.value)}><option>Profesional</option><option>Técnica</option><option>Monitoría</option></select></label><button>Publicar</button>{msg&&<p className='badge' style={{color:'#ffb'}}>{msg}</p>}</form></div>); }
