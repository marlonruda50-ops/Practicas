import { connectDb } from '../config/db.js'; import { initDb, Rol, Usuario, Oferta } from '../models/index.js'; import { hash } from '../utils/bcrypt.utils.js'; async function main(){ await connectDb(); await initDb(); const roles=['Estudiante','Empresa','Coordinador','Admin']; for(const nombre of roles){ await Rol.findOrCreate({ where:{nombre}, defaults:{nombre} }); } const pass=await hash('demo1234'); const empresaRol=await Rol.findOne({ where:{ nombre:'Empresa' } }); const estudianteRol=await Rol.findOne({ where:{ nombre:'Estudiante' } }); const [empresa] = await Usuario.findOrCreate({ where:{ correo:'empresa@demo.com' }, defaults:{ nombre:'Empresa', apellido:'Demo', correo:'empresa@demo.com', password_hash:pass, id_rol:empresaRol.id } }); await Usuario.findOrCreate({ where:{ correo:'estudiante@demo.com' }, defaults:{ nombre:'Estu', apellido:'Demo', correo:'estudiante@demo.com', password_hash:pass, id_rol:estudianteRol.id } }); await Oferta.findOrCreate({ where:{ titulo:'Práctica Frontend' }, defaults:{ id_empresa:empresa.id, titulo:'Práctica Frontend', descripcion:'React/Vite', tipo_practica:'Profesional' } }); await Oferta.findOrCreate({ where:{ titulo:'Práctica Backend' }, defaults:{ id_empresa:empresa.id, titulo:'Práctica Backend', descripcion:'Node/Express', tipo_practica:'Profesional' } }); console.log('✅ Seed listo: empresa@demo.com / estudiante@demo.com (pwd: demo1234)'); process.exit(0);} main().catch(e=>{ console.error('❌ Seed error:',e); process.exit(1); });
